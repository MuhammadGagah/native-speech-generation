# Native Speech Generation для NVDA

**Автор:** Muhammad Gagah <muha.aku@gmail.com>

Используйте мощь передового искусственного интеллекта Gemini от Google для высококачественного синтеза речи непосредственно в NVDA. Это дополнение предоставляет удобный диалог для преобразования текста в естественно звучащее аудио, поддерживая как повествование одним голосом, так и динамические диалоги с несколькими говорящими.

## Возможности

-   **Высококачественные голоса**: Выбирайте между **Gemini Flash** для синтеза речи стандартного качества с низкой задержкой и **Gemini Pro** для премиального, реалистичного генерации аудио.
-   **Режимы одного и нескольких говорящих**: Легко генерируйте аудио для одного рассказчика или создавайте динамические диалоги с двумя разными говорящими.
-   **Расширенное управление голосом**:
    -   **Именование говорящих**: В режиме нескольких говорящих назначайте собственные имена каждому говорящему (например, "Иван", "Мария"). ИИ автоматически назначит правильный голос на основе имён в вашем сценарии.
    -   **Инструкции по стилю**: Предоставляйте подсказки (например, "Говори веселым тоном"), чтобы направлять исполнение и подачу ИИ.
    -   **Управление температурой**: Регулируйте ползунок температуры в расширенных настройках, чтобы влиять на креативность речевого вывода. Низкие значения дают более стабильную, предсказуемую речь, а высокие значения допускают больше вариаций.
-   **Доступный и чистый интерфейс**: Все элементы управления полностью доступны. Расширенные настройки убраны в сворачиваемую панель, чтобы основной интерфейс оставался сфокусированным и простым в навигации.
-   **Бесперебойный рабочий процесс**:
    -   **Мгновенное автоматическое воспроизведение**: Аудио автоматически воспроизводится после успешной генерации.
    -   **Воспроизведение и сохранение**: Легко воспроизводите последнее сгенерированное аудио или сохраняйте его как высококачественный `.wav` файл.
-   **Умная загрузка голосов**: Дополнение получает последние доступные голоса из API Gemini и кеширует их на 24 часа, чтобы обеспечить быстрое время запуска.

## Требования

-   NVDA (рекомендуется последняя версия).
-   Требуется подключение к интернету для связи с API.
-   **Ключ API Google Gemini**.

## Установка и настройка

1.  Скачайте и установите дополнение, как любое другое дополнение NVDA.
2.  Перезапустите NVDA, когда будет предложено.
3.  **Крайне важно, вы должны настроить свой Ключ API Gemini.**
    -   Перейдите в [Google AI Studio](https://aistudio.google.com/apikey), чтобы создать и скопировать ваш ключ API.
    -   В NVDA перейдите в **Меню NVDA -> Сервис -> Нативная генерация речи**.
    -   В появившемся диалоге нажмите кнопку **"Настройки API ключа"**. Это откроет диалог настроек NVDA непосредственно в категории "Native Speech Generation".
    -   Вставьте ваш ключ API в поле "Ключ API GEMINI" и нажмите "OK" для сохранения.

## Как использовать

1.  Откройте диалог Нативная генерация речи, нажав комбинацию клавиш по умолчанию **`NVDA+Control+Shift+G`** или перейдя в **Меню NVDA -> Сервис -> Нативная генерация речи**.

### Основной интерфейс

-   **Текст для преобразования, введите здесь**: Основная область текста, куда вы вводите или вставляете содержимое, которое хотите преобразовать в речь.
-   **Инструкции по стилю (опционально)**: Вводите подсказки здесь, чтобы влиять на тон и подачу речи (например, "Рассказывай спокойным, умиротворяющим голосом", "Говори с воодушевлением").
-   **Выберите модель**:
    -   **Flash (Стандартное качество)**: По умолчанию. Лучше для быстрой генерации и общего использования.
    -   **Pro (Высокое качество)**: Лучше для финальных продуктов, требующих премиального, естественно звучащего аудио.
-   **Режим говорящего**:
    -   **Один говорящий**: Для стандартного преобразования текста в речь одним голосом.
    -   **Несколько говорящих (2)**: Для диалогов между двумя людьми.

### Генерация речи

#### Режим одного говорящего

1.  Убедитесь, что выбран переключатель "Один говорящий".
2.  Выберите желаемый голос из выпадающего списка "Выберите голос".
3.  Введите ваш текст в основную текстовую область.
4.  По желанию добавьте инструкции по стилю.
5.  Нажмите кнопку **"Сгенерировать речь"**.
6.  Вы услышите "Генерация речи, пожалуйста, подождите...". После завершения аудио воспроизведется автоматически.

#### Режим нескольких говорящих

1.  Выберите переключатель "Несколько говорящих (2)". Это откроет элементы управления для двух говорящих.
2.  Для каждого говорящего (Говорящий 1 и Говорящий 2):
    -   Введите уникальное имя в поле **"Имя говорящего"** (например, "Алиса", "Боб").
    -   Выберите отличный голос из соответствующего выпадающего списка **"Голос"**.
3.  В основной текстовой области форматируйте ваш сценарий, начиная каждую строку с имени говорящего, за которым следует двоеточие. **Имена должны точно совпадать с тем, что вы ввели в полях "Имя говорящего".**

    **Пример текста:**
    ```
    Алиса: Привет Боб, как ты сегодня?
    Боб: Отлично, Алиса! Погода просто замечательная.
    ```
4.  Нажмите кнопку **"Сгенерировать речь"**. ИИ прочитает диалог, назначая правильные голоса на основе имён говорящих.

### Расширенные настройки

-   Нажмите чекбокс **"Расширенные настройки (Температура)"**, чтобы открыть ползунок температуры.
-   **Ползунок температуры**: Управляет случайностью вывода. Значение по умолчанию — `1.0`.
    -   `0.0`: Наиболее детерминированный и стабильный.
    -   `2.0`: Наиболее креативный и вариативный.

### Кнопки

-   **Сгенерировать речь**: Запускает процесс генерации аудио.
-   **Воспроизвести**: Воспроизводит последнее успешно сгенерированное аудио.
-   **Сохранить аудио**: Открывает диалог для сохранения последнего сгенерированного аудио как `.wav` файла.
-   **Настройки API ключа**: Открывает диалог настроек NVDA на панели конфигурации дополнения.
-   **Просмотреть голоса в AI Studio**: Открывает веб-сайт Google AI Studio в вашем браузере для справки.
-   **Закрыть**: Закрывает диалог. Также можно нажать `Escape`.

## Жесты ввода

Следующие жесты можно настроить через **Меню NVDA -> Параметры -> Жесты ввода**, в категории "Нативная генерация речи".

-   **`NVDA+Control+Shift+G`**: Открывает диалог Нативной генерации речи.

## Участие в разработке

Предложения и улучшения всегда приветствуются! Если у вас есть отзывы, идеи или сообщения об ошибках, пожалуйста, не стесняйтесь обращаться.

-   **Email:** Свяжитесь со мной по адресу `muha.aku@gmail.com`
-   **GitHub:** Создайте issue или pull request в [репозитории проекта на GitHub](https://github.com/muhammadGagah).
